<style>
  .flash-stack{
    position:fixed; top:12px; right:12px; z-index:9999;
    display:flex; flex-direction:column; gap:8px;
  }
  .flash{
    min-width:280px; max-width:480px;
    background:#fff; border:1px solid #e9edf0; border-left-width:6px;
    border-radius:10px; padding:10px 12px; box-shadow:0 6px 16px rgba(0,0,0,.08);
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    font-size:14px;
  }
  .flash.success{ border-left-color:#16a34a }
  .flash.info{    border-left-color:#2563eb }
  .flash.warning{ border-left-color:#f59e0b }
  .flash.danger{  border-left-color:#dc2626 }
  .flash .close{
    appearance:none; border:0; background:transparent; font-size:18px; cursor:pointer;
    color:#475569; padding:0 6px;
  }
</style>

<div class="flash-stack" id="flash-stack">
  {% with msgs = get_flashed_messages(with_categories=true) %}
    {% if msgs %}
      {% for cat, msg in msgs %}
        <div class="flash {{ cat }}">
          <div>{{ msg|safe }}</div>
          <button class="close" aria-label="Fechar" onclick="this.parentElement.remove()">×</button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}
</div>

<script>
  // Auto-esconde após 4s
  setTimeout(() => {
    document.querySelectorAll('#flash-stack .flash').forEach(el => {
      el.style.transition = 'opacity .35s, transform .35s';
      el.style.opacity = '0';
      el.style.transform = 'translateY(-8px)';
      setTimeout(() => el.remove(), 400);
    });
  }, 4000);
</script>
